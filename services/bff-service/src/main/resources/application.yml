server:
  port: ${BFF_PORT:8088}

spring:
  application:
    name: bff-service
  datasource:
    url: ${DB_URL:jdbc:mysql://localhost:3306/bsl}
    username: ${DB_USER:bsl}
    password: ${DB_PASSWORD:bsl}
    driver-class-name: com.mysql.cj.jdbc.Driver
  data:
    redis:
      url: ${REDIS_URL:redis://localhost:6379}

bff:
  auth:
    enabled: ${BFF_AUTH_ENABLED:true}
    bypass: ${BFF_AUTH_BYPASS:false}
    admin-header: ${BFF_ADMIN_HEADER:x-admin-id}
    user-header: ${BFF_USER_HEADER:x-user-id}
  downstream:
    query-service:
      base-url: ${QS_BASE_URL:http://localhost:8001}
      timeout-ms: ${QS_TIMEOUT_MS:300}
    search-service:
      base-url: ${SS_BASE_URL:http://localhost:8080}
      timeout-ms: ${SS_TIMEOUT_MS:400}
    autocomplete-service:
      base-url: ${AC_BASE_URL:http://localhost:8081}
      timeout-ms: ${AC_TIMEOUT_MS:200}
  outbox:
    enabled: ${BFF_OUTBOX_ENABLED:false}
  rbac:
    enabled: ${BFF_RBAC_ENABLED:true}
    cache-ttl-ms: ${BFF_RBAC_CACHE_TTL_MS:30000}
  rate-limit:
    enabled: ${BFF_RATE_LIMIT_ENABLED:true}
    backend: ${BFF_RATE_LIMIT_BACKEND:memory}
    window-seconds: ${BFF_RATE_LIMIT_WINDOW_SECONDS:60}
    search-per-minute: ${BFF_RATE_LIMIT_SEARCH:60}
    autocomplete-per-minute: ${BFF_RATE_LIMIT_AUTOCOMPLETE:300}
    admin-per-minute: ${BFF_RATE_LIMIT_ADMIN:30}
    default-per-minute: ${BFF_RATE_LIMIT_DEFAULT:60}

app:
  cors:
    allowed-origins: "http://localhost:4173,http://localhost:5173,http://localhost:5174"
    allowed-methods: "GET,POST,PUT,PATCH,DELETE,OPTIONS"
    allowed-headers: "*"
    exposed-headers: "x-trace-id,x-request-id"
    allow-credentials: true

logging:
  level:
    root: INFO
